<?php

function w8io_chart( $title, $desc, $url )
{
    return sprintf( '<div id="highcharts-171fb64b-8e5c-4396-903b-e3e59636b110" style="margin: 1em; height:40em;"></div><script>(function(){ var files = ["https://code.highcharts.com/stock/highstock.js","https://code.highcharts.com/highcharts-more.js","https://code.highcharts.com/highcharts-3d.js","https://code.highcharts.com/modules/data.js","https://code.highcharts.com/modules/exporting.js","https://code.highcharts.com/modules/funnel.js","https://code.highcharts.com/modules/annotations.js","https://code.highcharts.com/modules/solid-gauge.js"],loaded = 0; if (typeof window["HighchartsEditor"] === "undefined") {window.HighchartsEditor = {ondone: [cl],hasWrapped: false,hasLoaded: false};include(files[0]);} else {if (window.HighchartsEditor.hasLoaded) {cl();} else {window.HighchartsEditor.ondone.push(cl);}}function isScriptAlreadyIncluded(src){var scripts = document.getElementsByTagName("script");for (var i = 0; i < scripts.length; i++) {if (scripts[i].hasAttribute("src")) {if ((scripts[i].getAttribute("src") || "").indexOf(src) >= 0 || (scripts[i].getAttribute("src") === "http://code.highcharts.com/highcharts.js" && src === "https://code.highcharts.com/stock/highstock.js")) {return true;}}}return false;}function check() {if (loaded === files.length) {for (var i = 0; i < window.HighchartsEditor.ondone.length; i++) {try {window.HighchartsEditor.ondone[i]();} catch(e) {console.error(e);}}window.HighchartsEditor.hasLoaded = true;}}function include(script) {function next() {++loaded;if (loaded < files.length) {include(files[loaded]);}check();}if (isScriptAlreadyIncluded(script)) {return next();}var sc=document.createElement("script");sc.src = script;sc.type="text/javascript";sc.onload=function() { next(); };document.head.appendChild(sc);}function each(a, fn){if (typeof a.forEach !== "undefined"){a.forEach(fn);}else{for (var i = 0; i < a.length; i++){if (fn) {fn(a[i]);}}}}var inc = {},incl=[]; each(document.querySelectorAll("script"), function(t) {inc[t.src.substr(0, t.src.indexOf("?"))] = 1; }); function cl() {if(typeof window["Highcharts"] !== "undefined"){Highcharts.setOptions({lang:{}});var options={"0":{"chart":{"type":"line","polar":false},"yAxis":[{"type":"logarithmic","minorTickInterval":"auto"}]},"title":{"text":"%s","style":{"color":"#E0E0E3","fontSize":"20px"}},"subtitle":{"text":"%s","style":{"color":"#E0E0E3"}},"exporting":{},"colors":["#2b908f","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],"chart":{"zoomType":"x","backgroundColor":"#404840","style":{"fontFamily":"Courier","fontSize":"12px"},"plotBorderColor":"#606063"},"xAxis":[{"title":{"style":{"fontFamily":"Courier","color":"#A0A0A3","fontSize":"18px","fontWeight":"normal","fontStyle":"normal"}},"labels":{"style":{"color":"#E0E0E3"}},"gridLineColor":"#707073","lineColor":"#707073","minorGridLineColor":"#505053","tickColor":"#707073"}],"yAxis":[{"title":{"style":{"color":"#A0A0A3"},"text":""},"labels":{"style":{"color":"#E0E0E3"}},"type":"logarithmic","min":"1","gridLineColor":"#707073","lineColor":"#707073","minorGridLineColor":"#505053","tickColor":"#707073","tickWidth":1}],"tooltip":{"backgroundColor":"rgba(64, 72, 64, 0.92)","style":{"color":"#F0F0F0"},"followPointer":true,"followTouchMove":false,"shared":true,"split":false,"enabled":true},"plotOptions":{"series":{"dataLabels":{"color":"#B0B0B3","enabled":false},"marker":{"lineColor":"#333"}},"boxplot":{"fillColor":"#505053"},"candlestick":{"lineColor":"white"},"errorbar":{"color":"white"}},"legend":{"itemStyle":{"color":"#E0E0E3","fontFamily":"Courier","fontSize":"12px","fontWeight":"normal","fontStyle":"normal"},"itemHoverStyle":{"color":"#FFF"},"itemHiddenStyle":{"color":"#606063"},"alignColumns":true,"floating":false,"enabled":true,"verticalAlign":"middle","y":0,"align":"right","layout":"vertical"},"credits":{"style":{"color":"#666"},"enabled":true},"labels":{"style":{"color":"#707073"},"items":[]},"drilldown":{"activeAxisLabelStyle":{"color":"#F0F0F3"},"activeDataLabelStyle":{"color":"#F0F0F3"}},"navigation":{"buttonOptions":{"symbolStroke":"#DDDDDD","theme":{"fill":"#505053"}}},"rangeSelector":{"buttonTheme":{"fill":"#505053","stroke":"#000000","style":{"color":"#CCC"},"states":{"hover":{"fill":"#707073","stroke":"#000000","style":{"color":"white"}},"select":{"fill":"#000003","stroke":"#000000","style":{"color":"white"}}}},"inputBoxBorderColor":"#505053","inputStyle":{"backgroundColor":"#333","color":"silver"},"labelStyle":{"color":"silver"}},"navigator":{"handles":{"backgroundColor":"#666","borderColor":"#AAA"},"outlineColor":"#CCC","maskFill":"rgba(255,255,255,0.1)","series":{"color":"#7798BF","lineColor":"#A6C7ED"},"xAxis":{"min":"10000","gridLineColor":"#505053"}},"scrollbar":{"barBackgroundColor":"#808083","barBorderColor":"#808083","buttonArrowColor":"#CCC","buttonBackgroundColor":"#606063","buttonBorderColor":"#606063","rifleColor":"#FFF","trackBackgroundColor":"#404043","trackBorderColor":"#404043"},"legendBackgroundColor":"rgba(0, 0, 0, 0.5)","background2":"#505053","dataLabelsColor":"#B0B0B3","textColor":"#C0C0C0","contrastTextColor":"#F0F0F3","maskColor":"rgba(255,255,255,0.3)","pane":{"background":[]},"responsive":{"rules":[]},"series":[{"_colorIndex":0,"_symbolIndex":0,"marker":{"enabled":true,"symbol":"circle"},"type":"area","color":"#000000"}],"data":{"csvURL":"%s"},"lang":{},"googleSpreadsheetKey":false,"googleSpreadsheetWorksheet":false};
Highcharts.merge(true, options, {
  tooltip: {
    crosshairs: [true],
    formatter: function() {
        var s = "<b>" + this.x + "";"</b>"
        this.points.forEach( function( point ) { s += "<br/><span style=\"color:" + point.color + "\">\u25CF</span> " + point.series.name.replace( / \((.+)\)/, "" ) + ": " + point.y; } );
        return s;
    }
  }
});
new Highcharts.Chart("highcharts-171fb64b-8e5c-4396-903b-e3e59636b110", options);}}})();</script>', $title, $desc, $url );
}
